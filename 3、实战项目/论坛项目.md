# 1、创建 SpringBoot 项目

## （1）快捷创建项目

​		这里我使用的是IDEA 付费版本【IntelliJ IDEA 2023.1.2 (Ultimate Edition)】，学习该花的钱不要省（嘿嘿，当然某宝也有物美价廉的方案），已经安装好了齐全的 Spring 插件（File -> Settings -> Plugins），这里创建项目用到了 Spring Initializr。

<img src="screenshots\1-IDEA-SpringPlugins.png" style="zoom:80%;"/>

​		File -> New -> New Project，选择 Spring Initializr 来初始化项目，注意一些关键信息要填好。

<img src="screenshots\2-Init-SpringBoot.png" style="zoom:80%;"/>

​		进入下一步，选择 Spring Boot 版本，添加项目用到的 SpringBoot Starter，先选 web，后面用到其他的可以手动添加。

<img src="screenshots\3-Add-SpringBootStarter.png" style="zoom:80%;"/>





## （2）工程目录文件简介

<img src="screenshots\4-ProjectDetails.png" style="zoom:80%;"/>

* **pom.xml**

​		Maven 项目依赖管理文件，默认生成的 pom.xml 会以 spring-boot-starter-parent 为父工程，将使用的版本修改为 2.1.4.RELEASE（跟教学视频保持一致），这样下面引用各种 SpringBoot Starter 时就不需要显式指定依赖版本，因为父工程已经指定好了版本，如下所示：

<img src="screenshots\5-SpringBootPom.png" style="zoom:80%;"/>

​		可以看到创建工程时勾选的 web starter，除此之外，还自动引入了 test starter，用于编写对 Spring Boot 的测试代码；在构建插件中，还自动引入了 spring-boot-maven-plugin，用于对工程进行构建打包。

* **.gitignore**

​		定义工程中忽略的文件和目录，这些文件和目录在提交代码入库时不会会被忽略，比如 IDE 自动生成的文件和目录，生成编译代码的文件和目录等。

* **HELP.md**

​		在 github 上进入一个项目时会有一个简介，github 会自动加载仓库根目录的 README.md 文档并渲染到网页上，这里先把 HELP.md 重命名为 README.md，然后在文档中添加对项目的介绍，包括功能、安装和使用步骤等。

* **src/main/java**

​		存放 java 代码的目录，这里已经按照初始化时指定的配置生成了一个代码包 `life.majiang.community`，并且自动创建了工程主类 `CommunityApplication.java`，启动它即可将工程跑起来。

​		一般情况下，我们会在 `life.majiang.community` 下创建新的包，比如 `life.majiang.community.controller`、`life.majiang.community.service` 等，因为工程启动时默认会扫描主类包及其子包中所有使用了 Spring 注解定义的 Bean（常用的注解有 `@Controller`、`@Component`、`@Service`等），当然也可以不这样做，比如定义一个新的包 `life.majiang.controller` ，这样要对包扫描时，需要在主类中显式指定要扫描的包。

* **src/main/resources**

​		存放工程的资源文件，默认有 static、templates 两个子目录，还有一个 application.properties 文件。

​		static 用来存放网站需要的静态文件，比如图片、css样式文件、javascript脚本文件等，一般会在 static 下再建不同的子目录区分，比如 static/images、static/css、static/js。

​		templates 用来存放网站需要的模板文件，当然流行的前后端分离一般已经不再使用模板，这里我们使用的引擎是 thymeleaf，后面还要引入相关的依赖。

​		application.properties 文件用来配置 Spring Boot 支持的各种参数，比如 web 服务对外暴露端口的参数为 `server.port`，默认值为 8080，如果要修改为 8081，在配置文件中编写如下一行键值对配置即可：

```properties
server.port=8081
```

* **src/main/test**

​		存放工程的测试代码，在严格执行单元测试的开发管理中，一个类要有一个对应的 Test 测试类，测试类所处包跟类相同。





## （3）运行工程

​		启动主类，可以看到日志中显示 SpringBoot 工程中嵌入了 Tomcat 服务器，默认启动的端口是 8080。

<img src="screenshots\6-SpringBootStart.png" style="zoom:100%;"/>

​		访问下 http://localhost:8080，可以看到显示的是默认的报错白页，因为此时我们还没编写任何的处理响应的控制器，Spring 找不到处理响应的程序，就只能返回一个 404 的报错。

<img src="screenshots\7-SpringBootStart.png" style="zoom:100%;"/>





```json
{
    "login":"huyihao",
    "id":11757351,
    "node_id":"MDQ6VXNlcjExNzU3MzUx",
    "avatar_url":"https://avatars.githubusercontent.com/u/11757351?v=4",
    "gravatar_id":"",
    "url":"https://api.github.com/users/huyihao",
    "html_url":"https://github.com/huyihao",
    "followers_url":"https://api.github.com/users/huyihao/followers",
    "following_url":"https://api.github.com/users/huyihao/following{/other_user}",
    "gists_url":"https://api.github.com/users/huyihao/gists{/gist_id}",
    "starred_url":"https://api.github.com/users/huyihao/starred{/owner}{/repo}",
    "subscriptions_url":"https://api.github.com/users/huyihao/subscriptions",
    "organizations_url":"https://api.github.com/users/huyihao/orgs",
    "repos_url":"https://api.github.com/users/huyihao/repos",
    "events_url":"https://api.github.com/users/huyihao/events{/privacy}",
    "received_events_url":"https://api.github.com/users/huyihao/received_events",
    "type":"User",
    "site_admin":false,
    "name":"codedog",
    "company":null,
    "blog":"",
    "location":null,
    "email":"1123176978@qq.com",
    "hireable":null,
    "bio":"a simple codedog",
    "twitter_username":null,
    "public_repos":18,
    "public_gists":0,
    "followers":0,
    "following":2,
    "created_at":"2015-04-01T16:18:30Z",
    "updated_at":"2023-05-09T13:14:10Z",
    "private_gists":0,
    "total_private_repos":5,
    "owned_private_repos":5,
    "disk_usage":2023496,
    "collaborators":0,
    "two_factor_authentication":false,
    "plan":{
        "name":"free",
        "space":976562499,
        "collaborators":0,
        "private_repos":10000
    }
}
```







# 使用MyBatis Generator

1、引入插件

```xml
<project>
  ...
  <build>
    ...
    <plugins>
      ...
      <plugin>
		<groupId>org.mybatis.generator</groupId>
		<artifactId>mybatis-generator-maven-plugin</artifactId>
		<version>1.3.7</version>
      </plugin>
    </plugins>
  </build>
</project>
```



2、执行maven命令（生成执行 MyBatis 需要的 model 和 mapper 文件）

```shell
# -Dmybatis.generator.overwrite=true 表示生成的文件是否覆盖原文件，不覆盖则生成文件为 MyClass.java.1
mvn mybatis-generator:generate -Dmybatis.generator.overwrite=true
```



3、创建配置文件

【默认路径】src/main/resources/generatorConfig.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE generatorConfiguration
        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd">
<generatorConfiguration>
    <context id="simple" targetRuntime="MyBatis3">
        <!-- 配置数据库连接，MBG才知道去连接哪个数据库获取表信息 -->
        <jdbcConnection driverClass="org.h2.Driver"
                        connectionURL="jdbc:h2:~/community"
                        userId="root"
                        password="root"/>

        <!-- 配置生成的Java Model类要放在哪个目录哪个包中 -->
        <javaModelGenerator targetPackage="life.majiang.community.model" targetProject="src/main/java"/>

        <!-- 配置生成的mapper.xml存放位置 -->
        <sqlMapGenerator targetPackage="mapper" targetProject="src/main/resources"/>

        <!-- ava 客户端生成器构建 Java 接口和类，以便轻松使用生成的 Java 模型和 XML 映射文件。 -->
        <javaClientGenerator type="XMLMAPPER" targetPackage="life.majiang.community.mapper" targetProject="src/main/java"/>

        <!-- 配置要扫描哪些表生成文件 -->
        <table tableName="cuser" domainObjectName="User"/>
    </context>
</generatorConfiguration>
```

